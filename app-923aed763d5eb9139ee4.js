(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"3re2":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"MAIN",(function(){return f})),n.d(r,"USERS",(function(){return p})),n.d(r,"POSTS",(function(){return d}));var a={};n.r(a),n.d(a,"API_BASE_URL",(function(){return y}));var o=n("mXGw"),c=n.n(o),i=n("xARA"),s=n("oNR1"),u=(n("6OPI"),n("TZaN")),l=(n("xvge"),n("dZF8")),f="/",p="/users",d="/posts",y="https://gorest.co.in/public-api/",m=(n("5flk"),n("v5c9")),b=n("ve3R"),h=Object(b.a)({basename:"/react-mobx-test-task"});h.listen((function(){return window.scrollTo(0,0)}));var g;!function(e){e.MAIN="MAIN",e.USERS="USERS"}(g||(g={}));var v=function(e){var t="";return e===r.MAIN&&(t=g.MAIN),e===r.USERS&&(t=g.USERS),t};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var a=j(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,a,o=P(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={selected:""},t.setStateByLocation=t.setStateByLocation.bind(U(t)),t.handleMenuClick=t.handleMenuClick.bind(U(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.setStateByLocation()}},{key:"componentDidUpdate",value:function(){var e=this.state.selected,t=h.location.pathname;e!==v(t)&&this.setStateByLocation()}},{key:"setStateByLocation",value:function(){var e,t,n=h.location.pathname,r=(t=(e=n).match(/^[\/](\w+)?/))?t[0]:e;this.setState({selected:v(r)})}},{key:"handleMenuClick",value:function(e){var t=e.key,n=h.push;this.setState({selected:g[t]},(function(){return n(r[t]||"")}))}},{key:"render",value:function(){var e=this.state.selected;return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{style:{padding:"0 100px"},defaultSelectedKeys:[""],theme:"dark",mode:"horizontal",onClick:this.handleMenuClick,selectedKeys:[e]},c.a.createElement(m.a.Item,{key:g.MAIN},"Main"),c.a.createElement(m.a.Item,{key:g.USERS},"Users")))}}])&&E(t.prototype,n),a&&E(t,a),i}(o.Component),k=(n("pJMU"),n("J+xt")),_=(n("83ui"),n("TYxb")),C=n("bb6g"),I=n("leJv"),x=n("D5b7"),L=(n("JVMX"),n("qsLp")),T=n("cneo"),M=n("czhI"),A=n.n(M).a.create({timeout:1e4,baseURL:a.API_BASE_URL});A.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat("dEs6UaZ4O7vjCcypwn3hRO-P4PzfKV7RI4-O"),e}));var N=A,D=function(e){return e?N.get("users?".concat(function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}(e))):N.get("users")};function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storedUsers={},this.isLoading=!1,this.viewedPage=1,this.selectedUserId="",this.paginationResponse={currentPage:1,perPage:20,pageCount:0,totalCount:0}}var t,n,r;return t=e,(n=[{key:"loadUsers",value:function(e){var t=this;this.isLoading=!0;var n=e||this.viewedPage;if(Object.keys(this.storedUsers).includes(String(n)))return this.paginationResponse=Object.assign(Object.assign({},this.paginationResponse),{currentPage:n}),this.viewedPage=n,void(this.isLoading=!1);D({page:n}).then((function(e){if(t.selectUser(""),e.data.result&&e.data.result.length){var r=e.data._meta;return r&&(t.paginationResponse={currentPage:r.currentPage||1,perPage:r.perPage||20,pageCount:r.pageCount||0,totalCount:r.totalCount||0}),t.storedUsers=Object.assign(Object.assign({},t.storedUsers),B({},n,e.data.result)),void(t.viewedPage=r.currentPage)}L.a.warn({message:"System error",description:"Data is unavailable. Please try again later"})})).catch((function(e){L.a.error({message:e})})).finally((function(){t.isLoading=!1}))}},{key:"loadUser",value:function(e){var t=this;this.isLoading=!0,function(e){return N.get("users/".concat(e))}(e).then((function(e){if(e.data.result){var n=e.data.result;t.storedUsers=Object.assign(Object.assign({},t.storedUsers),B({},n.id,n))}else L.a.warn({message:"System error",description:"Data is unavailable. Please try again later"})})).catch((function(e){L.a.error({message:e})})).finally((function(){t.isLoading=!1}))}},{key:"setPage",value:function(e){this.viewedPage=e}},{key:"selectUser",value:function(e){this.selectedUserId=e}},{key:"selectedUser",get:function(){var e=this;return this.users.find((function(t){return t.id===e.selectedUserId}))||null}},{key:"users",get:function(){return this.storedUsers[this.viewedPage]||[]}}])&&z(t.prototype,n),r&&z(t,r),e}();Object(C.a)([T.n],F.prototype,"storedUsers",void 0),Object(C.a)([T.n],F.prototype,"isLoading",void 0),Object(C.a)([T.n],F.prototype,"viewedPage",void 0),Object(C.a)([T.n],F.prototype,"selectedUserId",void 0),Object(C.a)([T.n],F.prototype,"paginationResponse",void 0),Object(C.a)([T.f],F.prototype,"loadUsers",null),Object(C.a)([T.f],F.prototype,"loadUser",null),Object(C.a)([T.f],F.prototype,"setPage",null),Object(C.a)([T.f],F.prototype,"selectUser",null),Object(C.a)([T.g],F.prototype,"selectedUser",null),Object(C.a)([T.g],F.prototype,"users",null);var K=new F,J=function(e){return N.get("posts?".concat(function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}(e)))};function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.posts=[],this.isLoading=!1,this.selectedPost="",this.paginationResponse={currentPage:1,perPage:20,pageCount:0,totalCount:0}}var t,n,r;return t=e,(n=[{key:"loadUserPosts",value:function(e,t){var n=this;e&&(this.isLoading=!0,J({page:t||1,user_id:e}).then((function(e){if(n.selectPost(""),e.data.result&&e.data._meta){n.posts=e.data.result;var t=e.data._meta;t&&(n.paginationResponse={currentPage:t.currentPage||1,perPage:t.perPage||20,pageCount:t.pageCount||0,totalCount:t.totalCount||0})}else L.a.warn({message:"System error",description:"Data is unavailable. Please try again later"})})).catch((function(e){L.a.error({message:e})})).finally((function(){n.isLoading=!1})))}},{key:"selectPost",value:function(e){this.selectedPost=e}}])&&q(t.prototype,n),r&&q(t,r),e}();Object(C.a)([T.n],H.prototype,"posts",void 0),Object(C.a)([T.n],H.prototype,"isLoading",void 0),Object(C.a)([T.n],H.prototype,"selectedPost",void 0),Object(C.a)([T.n],H.prototype,"paginationResponse",void 0),Object(C.a)([T.f],H.prototype,"loadUserPosts",null),Object(C.a)([T.f],H.prototype,"selectPost",null);var Z=new H,V=(n("4BqW"),n("H4M2")),X=function(){var e=u.a.Title,t=Object(s.g)().push,n=K.selectedUserId;return c.a.createElement("div",{className:"main"},c.a.createElement("span",null,c.a.createElement(e,{level:2},"Users list:")),c.a.createElement(V.a,{disabled:!n,size:"large",type:"link",onClick:function(){return t("".concat(r.USERS,"/").concat(n))}},"Show comments"))};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(o,e);var t,n,r,a=Q(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).selectRow=function(e){K.selectedUserId===e.id?K.selectUser(""):K.selectUser(e.id)},t.onSelectedRowChange=function(e){K.selectUser(String(e[0]))},t.onSelectedRowChange=t.onSelectedRowChange.bind(ee(t)),t.selectRow=t.selectRow.bind(ee(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){K.loadUsers()}},{key:"render",value:function(){var e=this,t=K.isLoading,n=K.users,r=K.paginationResponse,a=K.selectedUserId,o=[{title:"Фото",dataIndex:"_links",key:"_links",render:function(e){var t,n=null===(t=null==e?void 0:e.avatar)||void 0===t?void 0:t.href;return n?c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{src:n,icon:c.a.createElement(x.a,null)})):c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{icon:c.a.createElement(x.a,null)}))}},{title:"Имя",dataIndex:"first_name",key:"first_name"},{title:"Фамилия",dataIndex:"last_name",key:"last_name"},{title:"Пол",dataIndex:"gender",key:"gender"},{title:"Почта",dataIndex:"email",key:"email"},{title:"Телефон",dataIndex:"phone",key:"phone"},{title:"Статус",dataIndex:"status",key:"status"}],i={total:r.totalCount,current:r.currentPage,pageSize:r.perPage,onChange:function(e){return K.loadUsers(e)},hideOnSinglePage:!0,showSizeChanger:!1};return c.a.createElement(c.a.Fragment,null,c.a.createElement(k.a,{showHeader:!0,title:function(){return c.a.createElement(X,null)},rowSelection:{onChange:this.onSelectedRowChange,type:"radio",selectedRowKeys:[a]},loading:t,dataSource:n,columns:o,rowKey:"id",onRow:function(t){return{onClick:function(){return e.selectRow(t)}}},pagination:i}))}}])&&W(t.prototype,n),r&&W(t,r),o}(o.Component),re=ne=Object(C.a)([I.a],ne),ae=function(e){var t=e.children;return c.a.createElement("div",{className:"paper"},t)},oe=(n("e6mU"),n("kAeg")),ce=function(e){var t=e.data,n=t.title,r=t.body,a=u.a.Text;return c.a.createElement(oe.a,{className:"post-card",title:n,bordered:!0},c.a.createElement(a,null,r))};function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=de(e);if(t){var a=de(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(o,e);var t,n,r,a=fe(o);function o(){return se(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params;e.id&&(Z.loadUserPosts(e.id),!K.selectedUser&&K.loadUser(e.id))}},{key:"render",value:function(){var e=Z.posts,t=K.selectedUser,n=u.a.Title,r=u.a.Text;return c.a.createElement(ae,null,c.a.createElement(n,{level:2},"Posts "),t&&c.a.createElement(r,{style:{marginBottom:"20px"}}," ","made by ","".concat(t.first_name," ").concat(t.last_name)),e&&c.a.createElement(c.a.Fragment,null,e.map((function(e){return c.a.createElement(ce,{key:e.id,data:e})}))),!e.length&&c.a.createElement(r,null,"The user has no publications."))}}])&&ue(t.prototype,n),r&&ue(t,r),o}(o.PureComponent),me=ye=Object(C.a)([I.a],ye),be=n("USb2"),he=function(){var e=u.a.Title,t=u.a.Paragraph;return c.a.createElement(ae,null,c.a.createElement(e,{level:2},"Главная страница"),c.a.createElement(t,{strong:!0},"Добро пожаловать на главную страницу. Вы можете посмотреть список пользователей на странице"," ",c.a.createElement(be.a,{to:r.USERS},'"Users"'),"."))},ge=l.a.Header,ve=l.a.Footer,Se=l.a.Content,Ee=function(){var e=u.a.Title;return c.a.createElement(l.a,{className:"layout"},c.a.createElement(ge,{className:"header"},c.a.createElement(R,null)),c.a.createElement(Se,{style:{padding:"0 100px"}},c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:r.MAIN,component:he}),c.a.createElement(s.b,{exact:!0,path:r.USERS,component:re}),c.a.createElement(s.b,{exact:!0,path:"".concat(r.USERS,"/:id"),render:function(e){var t=e.match;return c.a.createElement(s.a,{to:"".concat(r.USERS,"/").concat(t.params.id).concat(r.POSTS)})}}),c.a.createElement(s.b,{exact:!0,path:"".concat(r.USERS,"/:id").concat(r.POSTS),component:me}),c.a.createElement(s.b,{render:function(){return c.a.createElement(e,{level:2},"Page not found")}}))),c.a.createElement(ve,{className:"footer"},"Тестовое задание выполнил Дмитрий Щукин"))},Oe=(n("KmqH"),document.getElementById("app"));i.render(o.createElement(s.c,{history:h},o.createElement(Ee,null)),Oe)},KmqH:function(e,t,n){}},[["3re2",1,2]]]);