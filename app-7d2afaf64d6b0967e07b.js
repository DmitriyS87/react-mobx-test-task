(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"3re2":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"MAIN",(function(){return f})),n.d(r,"USERS",(function(){return p})),n.d(r,"POSTS",(function(){return d}));var o={};n.r(o),n.d(o,"API_BASE_URL",(function(){return y}));var a=n("mXGw"),c=n.n(a),i=n("xARA"),s=n("oNR1"),u=(n("6OPI"),n("TZaN")),l=(n("xvge"),n("dZF8")),f="/",p="/users",d="/posts",y="https://gorest.co.in/public-api/",m=(n("5flk"),n("v5c9")),b=n("ve3R"),h=Object(b.a)({basename:"/react-mobx-test-task"});h.listen((function(){return window.scrollTo(0,0)}));var g;!function(e){e.MAIN="MAIN",e.USERS="USERS"}(g||(g={}));function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,n,o,a=S(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).getStateByLocation=t.getStateByLocation.bind(P(t)),t.handleMenuClick=t.handleMenuClick.bind(P(t)),t}return t=i,(n=[{key:"getStateByLocation",value:function(e){return function(e){var t="";return e===r.MAIN&&(t=g.MAIN),e===r.USERS&&(t=g.USERS),t}(function(e){var t=e.match(/^[\/](\w+)?/);return console.log({paths:t}),t?t[0]:e}(e))}},{key:"handleMenuClick",value:function(e){var t=e.key;(0,h.push)(r[t]||"")}},{key:"render",value:function(){var e=this.props.location.pathname,t=this.getStateByLocation(e);return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{style:{padding:"0 100px"},defaultSelectedKeys:[""],theme:"dark",mode:"horizontal",onClick:this.handleMenuClick,selectedKeys:[t]},c.a.createElement(m.a.Item,{key:g.MAIN},"Main"),c.a.createElement(m.a.Item,{key:g.USERS},"Users")))}}])&&O(t.prototype,n),o&&O(t,o),i}(a.Component),U=Object(s.h)(k),R=(n("pJMU"),n("J+xt")),_=(n("83ui"),n("TYxb")),C=n("bb6g"),I=n("leJv"),x=n("D5b7"),L=(n("JVMX"),n("qsLp")),T=n("cneo");var D=function(e){return e.reduce((function(e,t){return Object.assign(Object.assign({},e),(n={},r=t.id,o=t,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}),{})},M=n("czhI"),A=n.n(M).a.create({timeout:1e4,baseURL:o.API_BASE_URL});A.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat("dEs6UaZ4O7vjCcypwn3hRO-P4PzfKV7RI4-O"),e}));var N=A,B=function(e){return e?N.get("users?".concat(function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}(e))):N.get("users")};function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storedUsers={},this.pageData={},this.isLoading=!1,this.page=1,this.selectedUserId=null,this.paginationResponse={currentPage:1,perPage:20,pageCount:0,totalCount:0}}var t,n,r;return t=e,(n=[{key:"loadUsers",value:function(e){var t=this;this.isLoading=!0;var n=e||this.page;if(Object.keys(this.pageData).includes(String(n)))return this.paginationResponse=Object.assign(Object.assign({},this.paginationResponse),{currentPage:n}),this.page=n,void(this.isLoading=!1);B({page:n}).then((function(e){if(t.selectUser(""),e.data.result&&e.data.result.length){var r=e.data._meta;r&&(t.paginationResponse={currentPage:r.currentPage||1,perPage:r.perPage||20,pageCount:r.pageCount||0,totalCount:r.totalCount||0});var o=e.data.result,a=D(o);return t.storedUsers=Object.assign(Object.assign({},t.storedUsers),a),t.pageData[n]=Object.keys(a),void(t.page=r.currentPage)}L.a.warn({message:"System error",description:"Data is unavailable. Please try again later"})})).catch((function(e){L.a.error({message:e})})).finally((function(){t.isLoading=!1}))}},{key:"loadUser",value:function(e){var t=this;this.isLoading=!0,function(e){return N.get("users/".concat(e))}(e).then((function(e){if(e.data.result){var n=e.data.result;return t.storedUsers=Object.assign(Object.assign({},t.storedUsers),(r={},o=n.id,a=n,o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)),void t.selectUser(n.id)}var r,o,a;L.a.warn({message:"System error",description:"Data is unavailable. Please try again later"})})).catch((function(e){L.a.error({message:e})})).finally((function(){t.isLoading=!1}))}},{key:"selectUser",value:function(e){this.selectedUserId=e}},{key:"selectedUser",get:function(){return this.selectedUserId?this.storedUsers[this.selectedUserId]:""}},{key:"users",get:function(){var e,t=this,n=null!==(e=this.pageData[this.page])&&void 0!==e?e:null;return n?n.map((function(e){return t.storedUsers[e]})):[]}}])&&J(t.prototype,n),r&&J(t,r),e}();Object(C.a)([T.n],z.prototype,"storedUsers",void 0),Object(C.a)([T.n],z.prototype,"pageData",void 0),Object(C.a)([T.n],z.prototype,"isLoading",void 0),Object(C.a)([T.n],z.prototype,"page",void 0),Object(C.a)([T.n],z.prototype,"selectedUserId",void 0),Object(C.a)([T.n],z.prototype,"paginationResponse",void 0),Object(C.a)([T.f],z.prototype,"loadUsers",null),Object(C.a)([T.f],z.prototype,"loadUser",null),Object(C.a)([T.f],z.prototype,"selectUser",null),Object(C.a)([T.g],z.prototype,"selectedUser",null),Object(C.a)([T.g],z.prototype,"users",null);var K=new z,F=function(e){return N.get("posts?".concat(function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}(e)))};function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storedPosts={},this.pageData={},this.isLoading=!1,this.page=1,this.selectedPostId="",this.pagination={currentPage:1,perPage:20,pageCount:0,totalCount:0}}var t,n,r;return t=e,(n=[{key:"selectPost",value:function(e){this.selectedPostId===e?this.selectedPostId="":this.selectedPostId=e}},{key:"loadUserPosts",value:function(e,t){var n=this;if(e){this.isLoading=!0;var r=t||this.page;if(Object.keys(this.pageData).includes(String(r)))return this.pagination=Object.assign(Object.assign({},this.pagination),{currentPage:r}),this.page=r,void(this.isLoading=!1);F({page:r,user_id:e}).then((function(e){if(n.selectedPostId="",e.data.result&&e.data._meta){var t=e.data._meta;t&&(n.pagination={currentPage:t.currentPage||1,perPage:t.perPage||20,pageCount:t.pageCount||0,totalCount:t.totalCount||0});var o=e.data.result,a=D(o);return n.storedPosts=a,void(n.pageData[r]=Object.keys(n.storedPosts))}L.a.warn({message:"System error",description:"Data is unavailable. Please try again later"})})).catch((function(e){L.a.error({message:e})})).finally((function(){n.isLoading=!1}))}}},{key:"posts",get:function(){var e,t=this,n=null!==(e=this.pageData[this.page])&&void 0!==e?e:null;return n?n.map((function(e){return t.storedPosts[e]})):[]}}])&&q(t.prototype,n),r&&q(t,r),e}();Object(C.a)([T.n],H.prototype,"storedPosts",void 0),Object(C.a)([T.n],H.prototype,"pageData",void 0),Object(C.a)([T.n],H.prototype,"isLoading",void 0),Object(C.a)([T.n],H.prototype,"page",void 0),Object(C.a)([T.n],H.prototype,"selectedPostId",void 0),Object(C.a)([T.n],H.prototype,"pagination",void 0),Object(C.a)([T.f],H.prototype,"selectPost",null),Object(C.a)([T.f],H.prototype,"loadUserPosts",null),Object(C.a)([T.g],H.prototype,"posts",null);var Z=new H,V=function(e){return e?N.get("comments?".concat(function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}(e))):N.get("comments")};function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isLoading=!1,this.postId=null,this.storedComments={},this.loadComments=function(e){e&&!Object.keys(t.storedComments).includes(e)&&(t.postId=e,t.isLoading=!0,V({post_id:e}).then((function(n){t.saveComments(e,n.data.result)})).finally((function(){t.isLoading=!1})))}}var t,n,r;return t=e,(n=[{key:"saveComments",value:function(e,t){this.storedComments[e]=t}},{key:"comments",get:function(){return this.postId&&this.storedComments[this.postId]||[]}}])&&X(t.prototype,n),r&&X(t,r),e}();Object(C.a)([T.n],G.prototype,"isLoading",void 0),Object(C.a)([T.n],G.prototype,"postId",void 0),Object(C.a)([T.n],G.prototype,"storedComments",void 0),Object(C.a)([T.f],G.prototype,"loadComments",void 0),Object(C.a)([T.f],G.prototype,"saveComments",null),Object(C.a)([T.g],G.prototype,"comments",null);var W=new G,Y=(n("4BqW"),n("H4M2")),Q=function(){var e=u.a.Title,t=Object(s.g)().push,n=K.selectedUserId;return c.a.createElement("div",{className:"main"},c.a.createElement("span",null,c.a.createElement(e,{level:2},"Users list:")),c.a.createElement(Y.a,{disabled:!n,size:"large",type:"link",onClick:function(){return t("".concat(r.USERS,"/").concat(n))}},"Show comments"))};function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(a,e);var t,n,r,o=re(a);function a(){var e;return ee(this,a),(e=o.apply(this,arguments)).selectRow=function(e){K.selectedUserId===e.id?K.selectUser(null):K.selectUser(e.id)},e.onSelectedRowChange=function(e){K.selectUser(String(e[0]))},e}return t=a,(n=[{key:"componentDidMount",value:function(){K.loadUsers()}},{key:"render",value:function(){var e=this,t=K.isLoading,n=K.users,r=K.paginationResponse,o=K.selectedUserId,a=[{title:"Фото",dataIndex:"_links",key:"_links",render:function(e){var t,n=null===(t=null==e?void 0:e.avatar)||void 0===t?void 0:t.href;return n?c.a.createElement(_.a,{src:n,icon:c.a.createElement(x.a,null)}):c.a.createElement(_.a,{icon:c.a.createElement(x.a,null)})}},{title:"Имя",dataIndex:"first_name",key:"first_name"},{title:"Фамилия",dataIndex:"last_name",key:"last_name"},{title:"Пол",dataIndex:"gender",key:"gender"},{title:"Почта",dataIndex:"email",key:"email"},{title:"Телефон",dataIndex:"phone",key:"phone"},{title:"Статус",dataIndex:"status",key:"status"}],i={total:r.totalCount,current:r.currentPage,pageSize:r.perPage,onChange:function(e){return K.loadUsers(e)},hideOnSinglePage:!0,showSizeChanger:!1};return c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{showHeader:!0,title:function(){return c.a.createElement(Q,null)},rowSelection:{onChange:this.onSelectedRowChange,type:"radio",selectedRowKeys:[o||""]},loading:t,dataSource:n,columns:a,rowKey:"id",onRow:function(t){return{onClick:function(){return e.selectRow(t)}}},pagination:i}))}}])&&te(t.prototype,n),r&&te(t,r),a}(a.Component),ie=ce=Object(C.a)([I.a],ce),se=function(e){var t=e.children;return c.a.createElement("div",{className:"paper"},t)},ue=(n("80hE"),n("BhmJ")),le=(n("e6mU"),n("kAeg")),fe=n("8Jek"),pe=n.n(fe);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(a,e);var t,n,r,o=he(a);function a(){return ye(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.data,r=t.selected;e.selected!==r&&(0,W.loadComments)(n.id)}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.selected,r=void 0!==n&&n,o=W.comments,a=W.isLoading,i=Z.selectPost,s=t.title,l=t.body,f=t.id,p=u.a.Text;return u.a.Title,c.a.createElement(c.a.Fragment,null,c.a.createElement(le.a,{className:pe()("post-card",{"post-card__selected":r}),title:s,bordered:!0,onClick:function(){return i(f)}},c.a.createElement(p,null,l)),a&&c.a.createElement("div",null,"Loading"),r&&o.map((function(e){return c.a.createElement(ue.a,{key:e.id,author:c.a.createElement(p,{strong:!0},e.name),content:c.a.createElement(p,null,e.body)})})))}}])&&me(t.prototype,n),r&&me(t,r),a}(a.Component),je=Oe=Object(C.a)([I.a],Oe);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(a,e);var t,n,r,o=ke(a);function a(){return Ee(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.id;e.post,t&&(Z.loadUserPosts(t),!K.selectedUser&&K.loadUser(t))}},{key:"render",value:function(){var e=Z.posts,t=Z.selectedPostId,n=K.selectedUser,r=u.a.Title,o=u.a.Text;return c.a.createElement(se,null,c.a.createElement(r,{level:2},"Posts "),n&&c.a.createElement(o,{style:{marginBottom:"20px"}}," ","made by ","".concat(n.first_name," ").concat(n.last_name)),e.length>0&&c.a.createElement(c.a.Fragment,null,e.map((function(e){return c.a.createElement(je,{key:e.id,data:e,selected:e.id===t})}))),!e.length&&c.a.createElement(o,null,"The user has no publications."))}}])&&Pe(t.prototype,n),r&&Pe(t,r),a}(a.PureComponent),Ce=_e=Object(C.a)([I.a],_e),Ie=n("USb2"),xe=function(){var e=u.a.Title,t=u.a.Paragraph;return c.a.createElement(se,null,c.a.createElement(e,{level:2},"Главная страница"),c.a.createElement(t,{strong:!0},"Добро пожаловать на главную страницу. Вы можете посмотреть список пользователей на странице"," ",c.a.createElement(Ie.a,{to:r.USERS},'"Users"'),"."))},Le=l.a.Header,Te=l.a.Footer,De=l.a.Content,Me=function(){var e=u.a.Title;return c.a.createElement(l.a,{className:"layout"},c.a.createElement(Le,{className:"header"},c.a.createElement(U,null)),c.a.createElement(De,{style:{padding:"0 100px"}},c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:r.MAIN,component:xe}),c.a.createElement(s.b,{exact:!0,path:r.USERS,component:ie}),c.a.createElement(s.b,{exact:!0,path:"".concat(r.USERS,"/:id"),render:function(e){var t=e.match;return c.a.createElement(s.a,{to:"".concat(r.USERS,"/").concat(t.params.id).concat(r.POSTS)})}}),c.a.createElement(s.b,{exact:!0,path:"".concat(r.USERS,"/:id").concat(r.POSTS,"/:post"),component:Ce}),c.a.createElement(s.b,{exact:!0,path:"".concat(r.USERS,"/:id").concat(r.POSTS),component:Ce}),c.a.createElement(s.b,{render:function(){return c.a.createElement(e,{level:2},"Page not found")}}))),c.a.createElement(Te,{className:"footer"},"Тестовое задание выполнил Дмитрий Щукин"))},Ae=(n("KmqH"),document.getElementById("app"));i.render(a.createElement(s.c,{history:h},a.createElement(Me,null)),Ae)},KmqH:function(e,t,n){}},[["3re2",1,2]]]);